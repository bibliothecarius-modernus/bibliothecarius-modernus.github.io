---
layout: default
---
<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">{{ page.title | escape }}</h1>
    <div class="post-meta">
      <time datetime="{{ page.date | date_to_xmlschema }}" itemprop="datePublished">
        {{ page.date | date: "%B %-d, %Y" }}
      </time>
      {% if page.author %}
        â€¢ <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span itemprop="name">{{ page.author }}</span>
          </span>
      {% endif %}
      
      {% if page.categories %}
      <div class="post-categories">
        {% for category in page.categories %}
        <a href="{{ '/archive/#' | append: category | uri_escape | relative_url }}" class="category-tag" data-category="{{ category }}">{{ category }}</a>
        {% endfor %}
      </div>
      {% endif %}
    </div>
    
    {% if page.youtube_id %}
    <div class="youtube-embed">
      <iframe width="100%" height="500" src="https://www.youtube.com/embed/{{ page.youtube_id }}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    </div>
    {% elsif page.image %}
    <div class="post-featured-image">
      <img src="{{ page.image | relative_url }}" alt="{{ page.title | escape }}">
    </div>
    {% endif %}
    
    {% if page.article-summary %}
    <div class="article-summary-box">
      <p class="article-summary">{{ page.article-summary }}</p>
    </div>
    {% endif %}
  </header>

  {% if page.audio_analysis %}
  <div class="audio-player-container">
    <details>
      <summary>Listen to Audio Analysis</summary>
      <div class="audio-player">
        <audio controls>
          <source src="{{ page.audio_analysis | relative_url }}" type="audio/mpeg">
          Your browser does not support the audio element.
        </audio>
        <p class="audio-description">Listen to a brief analysis of this text</p>
      </div>
    </details>
  </div>
  {% endif %}

  <!-- Tab Navigation -->
  <div class="translation-tabs">
    <div class="tab-nav">
      <button class="tab-btn active" data-target="tab-analysis">Analysis</button>
      {% if page.latin_text or page.translation_json %}
        <button class="tab-btn" data-target="tab-latin">Latin Original</button>
        <button class="tab-btn" data-target="tab-english">English Translation</button>
        <button class="tab-btn" data-target="tab-interlinear">Interlinear View</button>
      {% endif %}
    </div>
    
    <!-- Tab Content -->
    <div class="tab-container">
      <!-- Analysis Tab -->
      <div id="tab-analysis" class="tab-content active">
        <div class="post-content analysis-content" itemprop="articleBody">
          {{ content }}
        </div>
      </div>
      
      {% if page.latin_text or page.translation_json %}
        <!-- Latin Tab -->
        <div id="tab-latin" class="tab-content">
          <div class="latin-content">
            {% if page.latin_text %}
              {{ page.latin_text | markdownify }}
            {% elsif page.translation_json %}
              {% for chunk in page.translation_json.chunks %}
                <div class="translation-section latin-section">
                  <div class="section-header">Section {{ chunk.chunk_number }}</div>
                  <div class="latin-text">
                    {{ chunk.original_latin | newline_to_br }}
                  </div>
                </div>
              {% endfor %}
            {% else %}
              <p class="placeholder-text">Latin text is not available for this document.</p>
            {% endif %}
          </div>
        </div>
        
        <!-- English Tab -->
        <div id="tab-english" class="tab-content">
          <div class="english-content">
            {% if page.english_translation %}
              {{ page.english_translation | markdownify }}
            {% elsif page.translation_json %}
              {% for chunk in page.translation_json.chunks %}
                <div class="translation-section english-section">
                  <div class="section-header">Section {{ chunk.chunk_number }}</div>
                  <div class="english-text">
                    {% assign cleaned_text = chunk.cleaned_english_translation | replace: '<speak>', '' | replace: '</speak>', '' %}
                    {% assign cleaned_text = cleaned_text | replace: '<s>', '' | replace: '</s>', '' %}
                    {% assign cleaned_text = cleaned_text | replace: '<p>', '<p class="translation-paragraph">' %}
                    {% assign cleaned_text = cleaned_text | replace: '<break time="500ms"/>', '' %}
                    {{ cleaned_text }}
                  </div>
                </div>
              {% endfor %}
            {% else %}
              <p class="placeholder-text">English translation is not available for this document.</p>
            {% endif %}
          </div>
        </div>
        
        <!-- Interlinear Tab -->
        <div id="tab-interlinear" class="tab-content">
          {% if page.translation_json %}
            {% for chunk in page.translation_json.chunks %}
              <div class="interlinear-section">
                <div class="section-header">Section {{ chunk.chunk_number }}</div>
                
                <div class="interlinear-content">
                  {% assign latin_lines = chunk.original_latin | split: "
" %}
                  
                  {% for line in latin_lines %}
                    {% if line != "" %}
                    <div class="interlinear-row">
                      <div class="interlinear-latin">{{ line }}</div>
                    </div>
                    {% endif %}
                  {% endfor %}
                  
                  <div class="interlinear-translation">
                    <h4>Complete Translation</h4>
                    <div class="complete-translation">
                      {% assign cleaned_text = chunk.cleaned_english_translation | replace: '<speak>', '' | replace: '</speak>', '' %}
                      {% assign cleaned_text = cleaned_text | replace: '<s>', '' | replace: '</s>', '' %}
                      {% assign cleaned_text = cleaned_text | replace: '<p>', '<p class="translation-paragraph">' %}
                      {% assign cleaned_text = cleaned_text | replace: '<break time="500ms"/>', '' %}
                      {{ cleaned_text }}
                    </div>
                  </div>
                </div>
                
                {% unless forloop.last %}
                  <hr class="section-separator">
                {% endunless %}
              </div>
            {% endfor %}
          {% else %}
            <p class="placeholder-text">Interlinear view is not available for this document.</p>
          {% endif %}
        </div>
      {% endif %}
    </div>
  </div>
  
  {% if page.youtube_id %}
  <div class="youtube-promo">
    <h3>Enjoy this article? Listen to the translation!</h3>
    <p>Get the full experience of this Latin Patristic text.</p>
    <a href="https://www.youtube.com/watch?v={{ page.youtube_id }}" class="youtube-button" target="_blank">
      <svg class="youtube-icon" viewBox="0 0 24 24" width="24" height="24">
        <path fill="currentColor" d="M23,9.71a8.5,8.5,0,0,0-.91-4.13,2.92,2.92,0,0,0-1.72-1A78.36,78.36,0,0,0,12,4.27a78.45,78.45,0,0,0-8.34,.3,2.93,2.93,0,0,0-1.73,1A8.35,8.35,0,0,0,1,9.71a48.29,48.29,0,0,0,0,4.58,8.33,8.33,0,0,0,.92,4.13A3.09,3.09,0,0,0,3.66,19.5a78.24,78.24,0,0,0,8.34,.31,78.24,78.24,0,0,0,8.34-.31,3,3,0,0,0,1.73-1.07,8.32,8.32,0,0,0,.91-4.13,48.29,48.29,0,0,0,0-4.58ZM9.88,14.56V9.44l5.47,2.55Z"/>
      </svg>
      Watch on YouTube
    </a>
  </div>
  {% endif %}
  
  <div class="post-navigation">
    <div class="post-nav-links">
      {% if page.previous.url %}
      <a class="prev-post" href="{{ page.previous.url | relative_url }}">
        <span class="nav-label">Previous</span>
        <span class="post-title">{{ page.previous.title | escape }}</span>
      </a>
      {% endif %}
      
      {% if page.next.url %}
      <a class="next-post" href="{{ page.next.url | relative_url }}">
        <span class="nav-label">Next</span>
        <span class="post-title">{{ page.next.title | escape }}</span>
      </a>
      {% endif %}
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Simple tab functionality
      var tabButtons = document.querySelectorAll('.tab-btn');
      var tabContents = document.querySelectorAll('.tab-content');
      
      tabButtons.forEach(function(button) {
        button.addEventListener('click', function() {
          // Remove active class from all buttons and contents
          tabButtons.forEach(function(btn) {
            btn.classList.remove('active');
          });
          
          tabContents.forEach(function(content) {
            content.classList.remove('active');
          });
          
          // Add active class to current button
          this.classList.add('active');
          
          // Show corresponding content
          var target = this.getAttribute('data-target');
          document.getElementById(target).classList.add('active');
          
          // Save preference to localStorage
          localStorage.setItem('preferredTab', target);
        });
      });
      
      // Check for saved preference
      var savedTab = localStorage.getItem('preferredTab');
      if (savedTab && document.getElementById(savedTab)) {
        // Find the button for this tab
        var savedButton = document.querySelector('.tab-btn[data-target="' + savedTab + '"]');
        if (savedButton) {
          savedButton.click();
        }
      }
    });
  </script>
</article>